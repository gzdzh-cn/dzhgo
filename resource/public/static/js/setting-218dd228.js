import{v as e}from"./@vue.runtime-dom-532828a1.js";import"./browser-f4ca2ed3.js";import"./vue-echarts-bffdbdc9.js";import{a as l,d as a}from"./element-plus-e665fdbc.js";import"./store-acbd10e3.js";import"./index-ecdd2562.js";import{u as d}from"./index-1fe6d5c5.js";import{B as u,U as o,A as t}from"./@element-plus.icons-vue-e9c91902.js";import{d as m,p as i,e as s,W as r,o as n,c,b as p,J as v,N as b,K as V,a as f,F as _,U as h}from"./@vue.runtime-core-6173334e.js";import{r as y,h as U,u as j}from"./@vue.reactivity-54707199.js";import"./@vue.shared-0cc4c744.js";import"./monaco-editor-c28fb00f.js";import"./axios-bb93cf32.js";import"./nprogress-27d9be10.js";import"./lodash-es-fd5b777b.js";import"./vue-router-25454f45.js";import"./@vueuse.core-cb7ad152.js";import"./@vueuse.shared-feb01f08.js";import"./pinia-77f7f468.js";import"./vue-demi-71ba0ef2.js";import"./mockjs-005b47e8.js";import"./index.umd.min-ead3793b.js";import"./vue-21f38777.js";import"./resize-detector-2312ef2b.js";import"./echarts-e550b62f.js";import"./tslib-a4e99503.js";import"./zrender-f72fb7be.js";import"./@popperjs.core-b696b006.js";import"./@ctrl.tinycolor-a951068a.js";import"./dayjs-f8876307.js";import"./async-validator-ff95bfc9.js";import"./memoize-one-63ab667a.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui.dom-92665be4.js";import"./@floating-ui.core-c1b3624a.js";const g={class:"view-my"},x={class:"box-con"},K={class:"box-list"},k={class:"box-col"},S={style:{padding:"10px 0 10px 0"}},w={class:"del"},I={class:"add"},N=m({name:"base-setting"}),C=m({...N,setup(m){const{service:N}=d(),C=y([1,2]),E=y(!1),T=y(),z=y([{contactName:"",imgUrl:""}]),A=()=>{z.value.push({contactName:"",imgUrl:""})},M=e=>{z.value[z.value.length-1].imgUrl=e.url,E.value=!1,T.value.close()},P=y(0);i((()=>z.value),(e=>{}),{immediate:!0,deep:!0});const R=y({sitename:"",notic:"",image:"",contact:"",mobile:"",contactList:[],remindDay:0,isRemindEmail:0,isRemindSms:0}),L=U({active:1,inactiv:0}),D=()=>{E.value=!1,R.value.contactList=z.value,N.base.sys.setting.update({id:1,...R.value}).then((()=>{l.success("更新成功")}))};return s((()=>{(async()=>{R.value=await N.base.sys.setting.info({id:1}),z.value=R.value.contactList?JSON.parse(R.value.contactList):z.value})()})),(d,m)=>{const i=r("el-input"),s=r("el-form-item"),y=r("cl-upload"),U=r("el-form"),N=r("el-tab-pane"),J=r("el-radio"),B=r("el-radio-group"),F=r("el-button"),q=r("el-card"),G=r("el-input-number"),O=r("el-switch"),W=r("el-tabs");return n(),c("div",g,[p(W,{type:"border-card"},{default:v((()=>[p(N,{label:"基本信息"},{default:v((()=>[p(U,{class:"card-form","label-width":"160px",model:R.value,disabled:E.value},{default:v((()=>[p(s,{label:"站点名称"},{default:v((()=>[p(i,{modelValue:R.value.sitename,"onUpdate:modelValue":m[0]||(m[0]=e=>R.value.sitename=e),placeholder:"请填写站点名称",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"明信片"},{default:v((()=>[p(y,{modelValue:R.value.image,"onUpdate:modelValue":m[1]||(m[1]=e=>R.value.image=e),text:"明信片",type:"image"},null,8,["modelValue"])])),_:1}),p(s,{label:"联系人"},{default:v((()=>[p(i,{modelValue:R.value.contact,"onUpdate:modelValue":m[2]||(m[2]=e=>R.value.contact=e),placeholder:"请填写联系人",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"手机号码"},{default:v((()=>[p(i,{modelValue:R.value.mobile,"onUpdate:modelValue":m[3]||(m[3]=e=>R.value.mobile=e),placeholder:"请填写手机号码",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","disabled"])])),_:1}),p(N,{label:"支付"},{default:v((()=>[p(U,{class:"card-form","label-width":"160px",model:R.value,disabled:E.value},{default:v((()=>[p(s,{label:"模式"},{default:v((()=>[p(B,{modelValue:R.value.payType,"onUpdate:modelValue":m[4]||(m[4]=e=>R.value.payType=e),class:"ml-4"},{default:v((()=>[p(J,{label:C.value[0],size:"large"},{default:v((()=>[b(" 普通商户模式 ")])),_:1},8,["label"]),p(J,{label:C.value[1],size:"large"},{default:v((()=>[b(" 服务商模式 ")])),_:1},8,["label"])])),_:1},8,["modelValue"])])),_:1}),V(f("div",null,[p(s,{label:"普通商户号"},{default:v((()=>[p(i,{modelValue:R.value.mchId,"onUpdate:modelValue":m[5]||(m[5]=e=>R.value.mchId=e),placeholder:"请填写普通商户号",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"普通商户appid"},{default:v((()=>[p(i,{modelValue:R.value.appid,"onUpdate:modelValue":m[6]||(m[6]=e=>R.value.appid=e),placeholder:"请填写普通商户appid",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"收款商户v3密钥"},{default:v((()=>[p(i,{modelValue:R.value.cAPIv3Key,"onUpdate:modelValue":m[7]||(m[7]=e=>R.value.cAPIv3Key=e),placeholder:"请填写收款商户v3密钥",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"序列号"},{default:v((()=>[p(i,{modelValue:R.value.cSerialNo,"onUpdate:modelValue":m[8]||(m[8]=e=>R.value.cSerialNo=e),placeholder:"请填写序列号",clearable:""},null,8,["modelValue"])])),_:1})],512),[[e,1==R.value.payType]]),V(f("div",null,[p(s,{label:"服务商商户号"},{default:v((()=>[p(i,{modelValue:R.value.spMchid,"onUpdate:modelValue":m[9]||(m[9]=e=>R.value.spMchid=e),placeholder:"请填写服务商商户号",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"服务商appid"},{default:v((()=>[p(i,{modelValue:R.value.spAppid,"onUpdate:modelValue":m[10]||(m[10]=e=>R.value.spAppid=e),placeholder:"请填写服务商appid",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"特约商户"},{default:v((()=>[p(i,{modelValue:R.value.subMchId,"onUpdate:modelValue":m[11]||(m[11]=e=>R.value.subMchId=e),placeholder:"请填写特约商户",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"收款商户v3密钥"},{default:v((()=>[p(i,{modelValue:R.value.aPIv3Key,"onUpdate:modelValue":m[12]||(m[12]=e=>R.value.aPIv3Key=e),placeholder:"请填写收款商户v3密钥",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"序列号"},{default:v((()=>[p(i,{modelValue:R.value.serialNo,"onUpdate:modelValue":m[13]||(m[13]=e=>R.value.serialNo=e),placeholder:"请填写序列号",clearable:""},null,8,["modelValue"])])),_:1})],512),[[e,2==R.value.payType]]),p(s,{label:"支付回调地址"},{default:v((()=>[p(i,{modelValue:R.value.notifyUrl,"onUpdate:modelValue":m[14]||(m[14]=e=>R.value.notifyUrl=e),placeholder:"请填写支付回调地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","disabled"])])),_:1}),p(N,{label:"翻译"},{default:v((()=>[p(U,{class:"card-form","label-width":"160px",model:R.value,disabled:E.value},{default:v((()=>[p(s,{label:"百度apiKey"},{default:v((()=>[p(i,{modelValue:R.value.baiduTranApiKey,"onUpdate:modelValue":m[15]||(m[15]=e=>R.value.baiduTranApiKey=e),placeholder:"请填写百度apiKey",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"百度secretKey"},{default:v((()=>[p(i,{modelValue:R.value.baiduTranSecretKey,"onUpdate:modelValue":m[16]||(m[16]=e=>R.value.baiduTranSecretKey=e),placeholder:"请填写百度secretKey",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","disabled"])])),_:1}),p(N,{label:"客服"},{default:v((()=>[f("div",x,[f("div",K,[(n(!0),c(_,null,h(z.value,((e,d)=>(n(),c("div",{class:"box-item",key:d},[p(q,{style:{"margin-bottom":"30px"}},{default:v((()=>[f("div",k,[p(i,{modelValue:e.contactName,"onUpdate:modelValue":l=>e.contactName=l,placeholder:"请填写客服名称",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),f("div",S,[p(y,{text:"选择图片",modelValue:e.imgUrl,"onUpdate:modelValue":l=>e.imgUrl=l,onSuccess:M},{default:v((()=>[p(F,{icon:j(o),onClick:e=>(e=>{T.value=a.service({lock:!0,text:"上传中",background:"rgba(0, 0, 0, 0.7)"}),E.value=!0,P.value=e})(d)},{default:v((()=>[b("上传")])),_:2},1032,["icon","onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue"])]),f("div",w,[p(F,{type:"danger",icon:j(t),onClick:e=>(e=>{1==z.value.length?l.warning("至少保留一个"):z.value.splice(e,1)})(d)},{default:v((()=>[b("删除")])),_:2},1032,["icon","onClick"])])])])),_:2},1024)])))),128))]),f("div",I,[p(F,{type:"info",icon:j(u),onClick:A},{default:v((()=>[b("增加一个")])),_:1},8,["icon"])])])])),_:1}),p(N,{label:"配置"},{default:v((()=>[p(U,{"label-width":"100px",model:R.value,disabled:E.value},{default:v((()=>[p(W,{"model-value":"basicConfig"},{default:v((()=>[p(N,{label:"通知设置",name:"basicConfig"},{default:v((()=>[p(s,{label:"到期天数提醒"},{default:v((()=>[p(G,{modelValue:R.value.remindDay,"onUpdate:modelValue":m[17]||(m[17]=e=>R.value.remindDay=e),placeholder:"提前天数",min:1,max:100,"controls-position":"right"},null,8,["modelValue"])])),_:1}),p(s,{label:"到期邮件提醒"},{default:v((()=>[p(O,{modelValue:R.value.isRemindEmail,"onUpdate:modelValue":m[18]||(m[18]=e=>R.value.isRemindEmail=e),"active-value":L.active,"inactiv-value":L.inactiv},null,8,["modelValue","active-value","inactiv-value"])])),_:1}),p(s,{label:"到期短信提醒"},{default:v((()=>[p(O,{modelValue:R.value.isRemindSms,"onUpdate:modelValue":m[19]||(m[19]=e=>R.value.isRemindSms=e),"active-value":L.active,"inactiv-value":L.inactiv},null,8,["modelValue","active-value","inactiv-value"])])),_:1})])),_:1}),p(N,{label:"邮件设置",name:"emailConfig"},{default:v((()=>[p(s,{label:"发送邮箱"},{default:v((()=>[p(i,{modelValue:R.value.smtpEmail,"onUpdate:modelValue":m[20]||(m[20]=e=>R.value.smtpEmail=e),placeholder:"请填写发送邮箱",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"smtp"},{default:v((()=>[p(i,{modelValue:R.value.smtp,"onUpdate:modelValue":m[21]||(m[21]=e=>R.value.smtp=e),placeholder:"请填写smtp",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"邮箱授权码"},{default:v((()=>[p(i,{modelValue:R.value.smtpPass,"onUpdate:modelValue":m[22]||(m[22]=e=>R.value.smtpPass=e),placeholder:"请填写邮箱授权码",type:"password",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"接收邮箱"},{default:v((()=>[p(i,{modelValue:R.value.remindEmail,"onUpdate:modelValue":m[23]||(m[23]=e=>R.value.remindEmail=e),placeholder:"请填写接收邮箱",clearable:""},null,8,["modelValue"])])),_:1})])),_:1}),p(N,{label:"短信设置",name:"second"},{default:v((()=>[p(s,{label:"accessKeyId"},{default:v((()=>[p(i,{modelValue:R.value.accessKeyId,"onUpdate:modelValue":m[24]||(m[24]=e=>R.value.accessKeyId=e),placeholder:"请填写accessKeyId",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"keySecret"},{default:v((()=>[p(i,{modelValue:R.value.accessKeySecret,"onUpdate:modelValue":m[25]||(m[25]=e=>R.value.accessKeySecret=e),placeholder:"请填写keySecret",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"签名"},{default:v((()=>[p(i,{modelValue:R.value.signName,"onUpdate:modelValue":m[26]||(m[26]=e=>R.value.signName=e),placeholder:"请填写签名",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"模板"},{default:v((()=>[p(i,{modelValue:R.value.templateCode,"onUpdate:modelValue":m[27]||(m[27]=e=>R.value.templateCode=e),placeholder:"请填写模板",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"endpoint"},{default:v((()=>[p(i,{modelValue:R.value.endpoint,"onUpdate:modelValue":m[28]||(m[28]=e=>R.value.endpoint=e),placeholder:"请填写endpoint",clearable:""},null,8,["modelValue"])])),_:1}),p(s,{label:"通知手机"},{default:v((()=>[p(i,{modelValue:R.value.remindMobile,"onUpdate:modelValue":m[29]||(m[29]=e=>R.value.remindMobile=e),placeholder:"请填写通知手机",clearable:""},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","disabled"])])),_:1})])),_:1}),p(s,null,{default:v((()=>[p(F,{type:"primary",disabled:E.value,onClick:D},{default:v((()=>[b("保存修改")])),_:1},8,["disabled"])])),_:1})])}}});export{C as default};
