import{v as e,a}from"./@vue.runtime-dom-532828a1.js";import{_ as o}from"./logo-5b4cc875.js";import{u as s}from"./browser-f4ca2ed3.js";import"./vue-echarts-bffdbdc9.js";import{a as l}from"./element-plus-e665fdbc.js";import"./store-acbd10e3.js";import"./index-ecdd2562.js";import{u as r}from"./index-1fe6d5c5.js";import{d as t,e as i,o as n,c as p,W as u,a as c,b as d,J as m,K as f,N as v,F as h,U as j,al as g,ak as y}from"./@vue.runtime-core-6173334e.js";import{r as x,h as _,u as b}from"./@vue.reactivity-54707199.js";import{_ as V}from"./_plugin-vue_export-helper-1b428a4d.js";import{Q as w,R as C,S as k,T as z}from"./@element-plus.icons-vue-e9c91902.js";import I from"./login-left-fd9ee231.js";import{L as K,p as T}from"./@vue.shared-0cc4c744.js";import"./monaco-editor-c28fb00f.js";import"./axios-bb93cf32.js";import"./nprogress-27d9be10.js";import"./lodash-es-fd5b777b.js";import"./vue-router-25454f45.js";import"./@vueuse.core-cb7ad152.js";import"./@vueuse.shared-feb01f08.js";import"./pinia-77f7f468.js";import"./vue-demi-71ba0ef2.js";import"./mockjs-005b47e8.js";import"./index.umd.min-ead3793b.js";import"./vue-21f38777.js";import"./resize-detector-2312ef2b.js";import"./echarts-e550b62f.js";import"./tslib-a4e99503.js";import"./zrender-f72fb7be.js";import"./@popperjs.core-b696b006.js";import"./@ctrl.tinycolor-a951068a.js";import"./dayjs-f8876307.js";import"./async-validator-ff95bfc9.js";import"./memoize-one-63ab667a.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui.dom-92665be4.js";import"./@floating-ui.core-c1b3624a.js";const U=["innerHTML"],L=["src"],F=t({name:"undefined"}),R=V(t({...F,emits:["update:modelValue","change"],setup(e,{expose:a,emit:o}){const{service:s}=r(),t=x(""),u=x("");function c(){s.base.open.captcha({height:40,width:150}).then((({captchaId:e,data:a})=>{a.includes(";base64,")?t.value=a:u.value=a,o("update:modelValue",e),o("change",{base64:t,svg:u,captchaId:e})})).catch((e=>{l.error(e.message)}))}return i((()=>{c()})),a({refresh:c}),(e,a)=>(n(),p("div",{class:"captcha",onClick:c},[u.value?(n(),p("div",{key:0,class:"svg",innerHTML:u.value},null,8,U)):(n(),p("img",{key:1,class:"base64",src:t.value,alt:""},null,8,L))]))}}),[["__scopeId","data-v-91df2060"]]),M=e=>(g("data-v-7132fdd9"),e=e(),y(),e),H={class:"select-none"},J=M((()=>c("img",{src:"/static/img/bg.png",class:"wave"},null,-1))),q={class:"login-container"},B={class:"img"},D={class:"login-box"},E={class:"login-form"},G=M((()=>c("img",{class:"avatar",src:o,alt:"Logo"},null,-1))),N={class:"outline-none"},P={class:"type-it","data-typeit-id":"0904744"},Q={class:"mutiType"},S=M((()=>c("div",{class:"bottom-text"},[v(" Copyright © 2023-永久 "),c("a",{class:"hover:text-primary"},"   广州大智汇信息科技有限公司 ")],-1))),W=t({name:"login"}),A=V(t({...W,setup(o){const{refs:t,setRefs:i,router:g,service:y}=r(),{user:V,app:U}=s();x(0);const L=x(!1);x("");const F=[{title:"账号登录",type:"account"}],M=x("account"),W=x(!0),A=x(0),O=x(!1),X=_({username:"",password:"",captchaId:"",verifyCode:"",phone:"",code:""});async function Y(){if("account"==M.value){if(!X.username)return l.error("用户名不能为空");if(!X.password)return l.error("密码不能为空");if(!X.verifyCode)return l.error("图片验证码不能为空")}else{if(!X.phone)return l.error("手机号码不能为空");if(!X.code)return l.error("验证码不能为空")}O.value=!0;try{let e;"account"==M.value&&(e=await y.base.open.login(X)),V.setToken(e),await Promise.all(U.events.hasToken.map((e=>e()))),g.push("/")}catch(e){"account"==M.value&&t.captcha.refresh(),l.error(e.message)}O.value=!1}return _({phone:"",code:""}),(o,s)=>{const l=u("el-input"),r=u("el-form-item"),t=u("el-button"),g=u("el-form");return n(),p("div",H,[J,c("div",q,[c("div",B,[d(I)]),c("div",D,[c("div",E,[G,c("h2",N,[c("div",null,[c("span",P,K(b(U).info.name),1)])]),d(g,{ref:"ruleFormRef",size:"large"},{default:m((()=>[f(c("div",null,[d(r,{prop:"username"},{default:m((()=>[d(l,{modelValue:X.username,"onUpdate:modelValue":s[0]||(s[0]=e=>X.username=e),clearable:"",placeholder:"请输入用户名",maxlength:"20",autocomplete:"on","prefix-icon":b(w)},null,8,["modelValue","prefix-icon"])])),_:1}),d(r,{prop:"password"},{default:m((()=>[d(l,{modelValue:X.password,"onUpdate:modelValue":s[1]||(s[1]=e=>X.password=e),clearable:"","show-password":"",placeholder:"请输入密码","prefix-icon":b(C)},null,8,["modelValue","prefix-icon"])])),_:1}),d(r,{prop:"verifyCode"},{default:m((()=>[d(l,{modelValue:X.verifyCode,"onUpdate:modelValue":s[4]||(s[4]=e=>X.verifyCode=e),clearable:"",placeholder:"请输入验证码","prefix-icon":b(k),onKeyup:a(Y,["enter"])},{append:m((()=>[d(R,{ref:b(i)("captcha"),modelValue:X.captchaId,"onUpdate:modelValue":s[2]||(s[2]=e=>X.captchaId=e),onChange:s[3]||(s[3]=()=>{X.verifyCode=""})},null,8,["modelValue"])])),_:1},8,["modelValue","prefix-icon","onKeyup"])])),_:1})],512),[[e,"account"==M.value]]),f(c("div",null,[d(g,{ref:"ruleFormRef",size:"large"},{default:m((()=>[d(r,{prop:"phone"},{default:m((()=>[d(l,{modelValue:X.phone,"onUpdate:modelValue":s[5]||(s[5]=e=>X.phone=e),class:"code",placeholder:"请输入手机号","prefix-icon":b(z)},{suffix:m((()=>[d(t,{onClick:o.getCode,style:{border:"none"}},{default:m((()=>[f(c("span",null,"发送验证码",512),[[e,W.value]]),f(c("span",{class:"count"},K(A.value)+" s",513),[[e,!W.value]])])),_:1},8,["onClick"])])),_:1},8,["modelValue","prefix-icon"])])),_:1}),d(r,{label:"验证码"},{default:m((()=>[d(l,{modelValue:X.code,"onUpdate:modelValue":s[6]||(s[6]=e=>X.code=e),type:"text",placeholder:"请输入手机验证码","prefix-icon":b(k),maxlength:"4",autocomplete:"off",onKeyup:a(Y,["enter"])},null,8,["modelValue","prefix-icon","onKeyup"])])),_:1})])),_:1},512)],512),[[e,"mobile"==M.value]]),d(r,null,{default:m((()=>[d(t,{class:"w-full mt-4",size:"default",type:"primary",loading:O.value,onClick:Y,disabled:L.value},{default:m((()=>[v(" 登录 ")])),_:1},8,["loading","disabled"])])),_:1}),d(r,null,{default:m((()=>[c("div",Q,[(n(),p(h,null,j(F,((e,a)=>d(t,{key:a,class:T(M.value==e.type?"active":""),onClick:a=>{return o=e.type,void(M.value=o);var o}},{default:m((()=>[v(K(e.title),1)])),_:2},1032,["class","onClick"]))),64))])])),_:1})])),_:1},512)])])]),S])}}}),[["__scopeId","data-v-7132fdd9"]]);export{A as default};
