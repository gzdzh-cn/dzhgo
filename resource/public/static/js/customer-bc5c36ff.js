import{i as e}from"./index.umd.min-ead3793b.js";import{u as o,e as p}from"./browser-f4ca2ed3.js";import"./vue-echarts-bffdbdc9.js";import"./element-plus-e665fdbc.js";import"./store-acbd10e3.js";import"./index-ecdd2562.js";import{u as r}from"./index-1fe6d5c5.js";import{d as t,W as s,o as a,I as n,J as l,a as i,b as m}from"./@vue.runtime-core-6173334e.js";import"./axios-bb93cf32.js";import"./vue-21f38777.js";import"./@vue.runtime-dom-532828a1.js";import"./@vue.shared-0cc4c744.js";import"./@vue.reactivity-54707199.js";import"./monaco-editor-c28fb00f.js";import"./nprogress-27d9be10.js";import"./lodash-es-fd5b777b.js";import"./vue-router-25454f45.js";import"./@vueuse.core-cb7ad152.js";import"./@vueuse.shared-feb01f08.js";import"./pinia-77f7f468.js";import"./vue-demi-71ba0ef2.js";import"./mockjs-005b47e8.js";import"./resize-detector-2312ef2b.js";import"./echarts-e550b62f.js";import"./tslib-a4e99503.js";import"./zrender-f72fb7be.js";import"./@element-plus.icons-vue-e9c91902.js";import"./@popperjs.core-b696b006.js";import"./@ctrl.tinycolor-a951068a.js";import"./dayjs-f8876307.js";import"./async-validator-ff95bfc9.js";import"./memoize-one-63ab667a.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui.dom-92665be4.js";import"./@floating-ui.core-c1b3624a.js";const u={style:{padding:"10px 10px 0px 20px",display:"flex","flex-wrap":"wrap","row-gap":"10px"}},c=i("div",{class:"divider"},null,-1),d=t({name:"crm-customer"}),b=t({...d,setup(t){const{service:d}=r(),{user:b}=o(),{dict:j}=p(),v=e.useUpsert({items:[{type:"tabs",props:{labels:[{label:"基础信息",value:"base"},{label:"其他信息",value:"other"}]}},{label:"会员",prop:"uid",span:12,required:!0,value:b.info.id,hidden:()=>1!=b.info.id,component:{name:"el-select",options:[],props:{}},group:"base"},{label:"是否公共库",prop:"isCommon",span:12,value:0,component:{name:"el-switch",props:{activeValue:1,inactiveValue:0}},group:"base"},{label:"客户名称",prop:"customerName",required:!0,span:12,component:{name:"el-input"},group:"base"},{label:"公司名称",prop:"company",span:12,component:{name:"el-input"},group:"base"},{label:"来源",prop:"source",span:12,component:{name:"el-select",options:j.get("source")},group:"base"},{label:"咨询品类",prop:"consultation",span:12,component:{name:"el-select",options:j.get("orderType")},group:"base"},{label:"备注",prop:"remark",component:{name:"el-input",props:{type:"textarea",rows:4}},group:"base"},{label:"公司网址",prop:"companyDomain",span:12,component:{name:"el-input"},group:"other"},{label:"电话",prop:"phone",span:12,component:{name:"el-input"},group:"other"},{label:"微信",prop:"wx",span:12,component:{name:"el-input"},group:"other"},{label:"QQ",prop:"qq",span:12,component:{name:"el-input"},group:"other"},{label:"Email",prop:"email",span:12,component:{name:"el-input"},group:"other"},{label:"公司地址",prop:"address",span:12,component:{name:"el-input"},group:"other"}],async onOpen(){var e;if(1==b.info.id){const o=await d.base.sys.user.list();null==(e=v.value)||e.setOptions("uid",o.map((e=>({label:e.nickName||"",value:e.id||""}))))}},onSubmit(e,{next:o}){var p;let r={};1!=(null==(p=b.info)?void 0:p.id)&&(r.uid=b.info.id),o({...e,...r})}}),f=e.useTable({columns:[{type:"selection"},{label:"会员",prop:"userName"},{label:"客户名称",prop:"customerName"},{label:"公司名称",prop:"company"},{label:"咨询品类",prop:"consultation",dict:{text:!0,separator:"",options:j.get("orderType").value}},{label:"创建时间",prop:"createTime",component:{name:"cl-date-text",props:{format:"YYYY-MM-DD"}}},{type:"op",buttons:["edit","delete"]}]}),g=e.useCrud({service:d.crm.customer},(e=>{e.refresh()}));return(e,o)=>{const p=s("cl-refresh-btn"),r=s("cl-add-btn"),t=s("cl-multi-delete-btn"),d=s("cl-search-key"),b=s("cl-flex1"),j=s("cl-table"),y=s("cl-row"),h=s("cl-pagination"),x=s("cl-upsert"),w=s("cl-crud");return a(),n(w,{ref_key:"Crud",ref:g},{default:l((()=>[i("div",u,[m(p),m(r),m(t,{style:{"margin-right":"10px"}}),m(d),m(b)]),c,m(y,null,{default:l((()=>[m(j,{ref_key:"Table",ref:f,border:!1},null,512)])),_:1}),m(y,null,{default:l((()=>[m(b),m(h)])),_:1}),m(x,{ref_key:"Upsert",ref:v},null,512)])),_:1},512)}}});export{b as default};
